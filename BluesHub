-- BluesHub by james23
-- Features: Auto Quest, Enhanced ESP Fruits, Auto Tap for Weapons, Draggable and Minimizable UI
-- DISCLAIMER: Use at your own risk. This script might violate Roblox's Terms of Service.

-- Services
local player = game.Players.LocalPlayer
local replicatedStorage = game:GetService("ReplicatedStorage")
local userInputService = game:GetService("UserInputService")
local runService = game:GetService("RunService")
local workspace = game:GetService("Workspace")

-- Toggle States
local toggles = {
    autoFarm = false,
    autoFruitCollect = false,
    espFruits = false,
    autoTeleportFruits = false,
    autoTap = false
}

-- Function to Toggle Features
local function ToggleFeature(feature)
    toggles[feature] = not toggles[feature]
    print("[BluesHub] " .. feature .. " is now " .. (toggles[feature] and "ON" or "OFF"))
end

-- Enhanced ESP Fruits Functionality
local function EnhancedESPFruits()
    while toggles.espFruits do
        for _, fruit in pairs(workspace:GetChildren()) do
            if fruit:IsA("Model") and fruit:FindFirstChild("Fruit") then
                -- Create ESP GUI if it doesn't exist
                if not fruit:FindFirstChild("BillboardGui") then
                    local esp = Instance.new("BillboardGui", fruit)
                    esp.Size = UDim2.new(0, 200, 0, 50)
                    esp.Adornee = fruit.PrimaryPart
                    esp.AlwaysOnTop = true

                    local text = Instance.new("TextLabel", esp)
                    text.Size = UDim2.new(1, 0, 1, 0)
                    text.BackgroundTransparency = 1
                    text.TextColor3 = Color3.fromRGB(255, 0, 0) -- Red text
                    text.TextScaled = true
                    text.Font = Enum.Font.SourceSansBold
                    text.Name = "FruitESPText"

                    -- Update text with fruit name and distance
                    runService.RenderStepped:Connect(function()
                        if fruit and fruit.PrimaryPart then
                            local distance = (player.Character.HumanoidRootPart.Position - fruit.PrimaryPart.Position).Magnitude
                            text.Text = fruit.Name .. " (" .. math.floor(distance) .. " meters)"
                        elseif fruit:FindFirstChild("FruitESPText") then
                            text.Text = "Fruit Removed"
                        end
                    end)
                end
            end
        end
        wait(1) -- Update every second
    end
end

-- Improved Auto Tap Functionality
local function AutoTapWeapons()
    runService.RenderStepped:Connect(function() -- Run every frame
        if toggles.autoTap then
            local character = player.Character
            if character and character:FindFirstChild("Humanoid") and character:FindFirstChild("HumanoidRootPart") then
                local tool = character:FindFirstChildOfClass("Tool") -- Get the currently equipped tool
                if tool and (tool.ToolTip:match("Melee") or tool.ToolTip:match("Sword") or tool.ToolTip:match("Gun") or tool.ToolTip:match("Fruit")) then
                    replicatedStorage.Remotes.CommF_:InvokeServer("Attack", tool.Name) -- Simulate attack
                end
            end
        end
    end)
end

-- Create UI
local screenGui = Instance.new("ScreenGui", game.CoreGui)
screenGui.Name = "BluesHub"

local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 400, 0, 350)
mainFrame.Position = UDim2.new(0.5, -200, 0.5, -175)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.Active = true -- Enable input detection for dragging
mainFrame.Draggable = true -- Make it draggable

-- Title Bar
local titleBar = Instance.new("Frame", mainFrame)
titleBar.Size = UDim2.new(1, 0, 0, 50)
titleBar.BackgroundColor3 = Color3.fromRGB(200, 30, 30)
titleBar.BorderSizePixel = 0

local titleLabel = Instance.new("TextLabel", titleBar)
titleLabel.Size = UDim2.new(1, -50, 1, 0)
titleLabel.Position = UDim2.new(0, 10, 0, 0)
titleLabel.Text = "BluesHub"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextScaled = true
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.BackgroundTransparency = 1

-- Close Button
local closeButton = Instance.new("TextButton", titleBar)
closeButton.Size = UDim2.new(0, 40, 0, 40)
closeButton.Position = UDim2.new(1, -45, 0.5, -20)
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.TextScaled = true
closeButton.Font = Enum.Font.SourceSansBold
closeButton.BackgroundColor3 = Color3.fromRGB(200, 30, 30)
closeButton.BorderSizePixel = 0
closeButton.AnchorPoint = Vector2.new(0.5, 0.5)
closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Minimize Button
local minimizeButton = Instance.new("TextButton", titleBar)
minimizeButton.Size = UDim2.new(0, 40, 0, 40)
minimizeButton.Position = UDim2.new(1, -90, 0.5, -20)
minimizeButton.Text = "-"
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.TextScaled = true
minimizeButton.Font = Enum.Font.SourceSansBold
minimizeButton.BackgroundColor3 = Color3.fromRGB(200, 30, 30)
minimizeButton.BorderSizePixel = 0
minimizeButton.AnchorPoint = Vector2.new(0.5, 0.5)

-- Button Container
local buttonContainer = Instance.new("Frame", mainFrame)
buttonContainer.Size = UDim2.new(1, -20, 1, -70)
buttonContainer.Position = UDim2.new(0, 10, 0, 60)
buttonContainer.BackgroundTransparency = 1

-- Function to Create Toggle Buttons
local function CreateToggleButton(name, feature)
    local button = Instance.new("TextButton", buttonContainer)
    button.Size = UDim2.new(1, -20, 0, 40)
    button.Position = UDim2.new(0.5, 0, 0, (#buttonContainer:GetChildren() - 1) * 50)
    button.AnchorPoint = Vector2.new(0.5, 0)
    button.Text = name .. ": OFF"
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextScaled = true
    button.Font = Enum.Font.SourceSansBold
    button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    button.BorderSizePixel = 0

    button.MouseButton1Click:Connect(function()
        ToggleFeature(feature)
        button.Text = name .. ": " .. (toggles[feature] and "ON" or "OFF")
        if toggles[feature] then
            button.BackgroundColor3 = Color3.fromRGB(30, 200, 30)
        else
            button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        end
        if feature == "espFruits" then
            spawn(EnhancedESPFruits)
        elseif feature == "autoTap" then
            AutoTapWeapons()
        end
    end)
end

-- Create Buttons
CreateToggleButton("Auto Tap", "autoTap")
CreateToggleButton("ESP Fruits", "espFruits")

-- Minimize Functionality
local isMinimized = false
minimizeButton.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    if isMinimized then
        buttonContainer.Visible = false
        mainFrame.Size = UDim2.new(0, 400, 0, 50) -- Shrink to just the title bar
    else
        buttonContainer.Visible = true
        mainFrame.Size = UDim2.new(0, 400, 0, 350) -- Restore full size
    end
end)

print("[BluesHub] All features are loaded and ready!")
